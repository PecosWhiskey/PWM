<!-- <!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VayGo Airlines - Check-in</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/7.1.0/ionicons.min.css" rel="stylesheet">

  </head>
  <body>
      <div class="container"> -->
          <!-- Ricerca Biglietto -->
          <!-- <div class="vaygo-card">
              <div class="card-header">
                  <h1>
                      <ion-icon name="airplane-outline"></ion-icon>
                      Check-in VayGo Airlines
                  </h1>
                  <p>Inserisci i tuoi dati per iniziare il check-in</p>
              </div>
              <div class="card-content">
                  <form id="searchForm">
                      <div class="form-group">
                          <label for="idBiglietto">Codice Biglietto</label>
                          <div class="input-wrapper">
                              <ion-icon name="ticket-outline"></ion-icon>
                              <input 
                                  type="number" 
                                  id="idBiglietto" 
                                  name="idBiglietto" 
                                  class="vaygo-input" 
                                  placeholder="Inserisci il codice del biglietto" 
                                  [(ngModel)]="idBiglietto"
                                  required
                              >
                          </div>
                      </div>
  
                      <div class="form-group">
                          <label for="idPasseggero">Codice Fiscale</label>
                          <div class="input-wrapper">
                              <ion-icon name="person-outline"></ion-icon>
                              <input 
                                  type="text" 
                                  id="idPasseggero" 
                                  name="idPasseggero" 
                                  class="vaygo-input" 
                                  placeholder="Inserisci il codice fiscale" 
                                  [(ngModel)]="idPasseggero"
                                  required
                              >
                          </div>
                      </div>
  
                      <ion-button type="button" class="vaygo-btn-primary" (click)="Cerca()">
                          <ion-icon name="search-outline"></ion-icon>
                          Cerca Biglietto
                      </ion-button>
                  </form>
              </div>
          </div> -->
          <!-- <ion-content>
  <form>
    <ion-item>
      <ion-input type="number" name="idBiglietto" [(ngModel)]="idBiglietto" placeholder="Codice del biglietto" ngDefaultControl  required></ion-input>
    </ion-item>

    <ion-item>
      <ion-input type="text" name="idPasseggero" [(ngModel)]="idPasseggero" placeholder="Codice fiscale del passeggero" ngDefaultControl  required></ion-input>
    </ion-item>

    <ion-button (click)="Cerca()">Fai il check-in</ion-button>
  </form>

  @if(found){
    <ion-content>
      <form>
        <ion-item>
          <ion-select name="tariffa" [(ngModel)]="tariffa" required>
            <ion-select-option value="standard">Standard</ion-select-option>
            <ion-select-option value="flex">Flex</ion-select-option>
            <ion-select-option value="plus">Plus</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-input type="text" name="posto" placeholder="Scegli il posto" [(ngModel)]="sceltaPosto" ngDefaultControl></ion-input>
        </ion-item>

        <ion-button (click)="CheckIn()">Check-In</ion-button>
      </form>
    </ion-content>
  }
</ion-content> -->
  
          <!-- Form Check-in (mostrato solo dopo ricerca) -->
        <!-- @if(found){
            <ion-content>
      <form>
        <ion-item>
          <ion-select name="tariffa" [(ngModel)]="tariffa" required>
            <ion-select-option value="standard">Standard</ion-select-option>
            <ion-select-option value="flex">Flex</ion-select-option>
            <ion-select-option value="plus">Plus</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-input type="text" name="posto" placeholder="Scegli il posto" [(ngModel)]="sceltaPosto" ngDefaultControl></ion-input>
        </ion-item>

        <ion-button (click)="CheckIn()">Check-In</ion-button>
      </form>
    </ion-content> -->
            <!-- <div id="checkinForm" class="checkin-form vaygo-card">
              <div class="card-header">
                  <h1>
                      <ion-icon name="checkmark-circle-outline"></ion-icon>
                      Completa il Check-in
                  </h1>
                  <p>Seleziona la tariffa e il posto a sedere</p>
              </div>
              <div class="card-content">
                  <div class="alert">
                      <ion-icon name="information-circle-outline"></ion-icon>
                      <div class="alert-text">
                          Biglietto trovato! Procedi con la selezione della tariffa e del posto.
                      </div>
                  </div>
                -->
                  <!-- Selezione Tariffa -->
                  <!-- <div class="tariff-selection">
                      <div class="section-title">
                          <ion-icon name="pricetag-outline"></ion-icon>
                          Scegli la Tariffa
                      </div>
                      <div class="tariff-grid">
                          <div class="tariff-card" onclick="selectTariff('standard')">
                              <h3>Standard</h3>
                              <p>Tariffa base</p>
                              <div class="tariff-price">1x</div>
                          </div>
                          <div class="tariff-card" onclick="selectTariff('flex')">
                              <h3>Flex</h3>
                              <p>Maggiore flessibilità</p>
                              <div class="tariff-price">1.5x</div>
                          </div>
                          <div class="tariff-card" onclick="selectTariff('plus')">
                              <h3>Plus</h3>
                              <p>Servizi premium</p>
                              <div class="tariff-price">2x</div>
                          </div>
                      </div>
                  </div> -->
  
                  <!-- Selezione Posto -->
                  <!-- <div class="seat-selection">
                      <div class="section-title">
                          <ion-icon name="airplane-outline"></ion-icon>
                          Scegli il Posto
                      </div>
                      <div class="seat-grid-container">
                          <div class="airplane-container">
                              <div class="airplane-nose"></div>
                              <div class="seat-grid" id="seatGrid"> -->
                                  <!-- I posti verranno generati dinamicamente -->
                              <!-- </div>
                              <div class="airplane-tail"></div>
                          </div>
                          <div class="seat-legend">
                              <div class="legend-item">
                                  <div class="legend-seat available"></div>
                                  <span>Disponibile</span>
                              </div>
                              <div class="legend-item">
                                  <div class="legend-seat selected"></div>
                                  <span>Selezionato</span>
                              </div>
                              <div class="legend-item">
                                  <div class="legend-seat occupied"></div>
                                  <span>Occupato</span>
                              </div>
                          </div>
                      </div>
                  </div>
  
                  <ion-button type="button" class="vaygo-btn-primary" (click)="CheckIn()" style="margin-top: var(--vaygo-spacing-xl);">
                      <ion-icon name="checkmark-done-outline"></ion-icon>
                      Completa Check-in
                  </ion-button>
              </div>
          </div>  -->
        <!-- }   
          
      </div> -->

<ion-content>
        <form>
          <ion-item>
            <ion-input type="number" name="idBiglietto" [(ngModel)]="idBiglietto" placeholder="Codice del biglietto" ngDefaultControl  required></ion-input>
          </ion-item>
      
          <ion-item>
            <ion-input type="text" name="idPasseggero" [(ngModel)]="idPasseggero" placeholder="Codice fiscale del passeggero" ngDefaultControl  required></ion-input>
          </ion-item>
      
          <ion-button (click)="Cerca()">Fai il check-in</ion-button>

          <ion-alert
            [isOpen]="isAlertOpen"
            header="Hai già fatto il check-in di questo biglietto!"
            [buttons]="alertButtons"
            (didDismiss)="setOpen(false)">
          </ion-alert>
        </form>
      
        @if(found){
          <ion-content>
            <form>
              <ion-item>
                <ion-select name="tariffa" [(ngModel)]="tariffa" required>
                  <ion-select-option value="standard">Standard</ion-select-option>
                  <ion-select-option value="flex">Flex</ion-select-option>
                  <ion-select-option value="plus">Plus</ion-select-option>
                </ion-select>
              </ion-item>
      
              <ion-item>
                <ion-input type="text" name="posto" placeholder="Scegli il posto" [(ngModel)]="sceltaPosto" ngDefaultControl></ion-input>
              </ion-item>
      
              <ion-button (click)="CheckIn()">Check-In</ion-button>

               <ion-alert
                [isOpen]="isAlertOpen"
                header="Oops! Il posto che hai scelto è già occupato"
                message="Ti preghiamo di scegliere un altro posto, grazie"
                [buttons]="alertButtons"
                (didDismiss)="setOpen(false)">
              </ion-alert>
            </form>
          </ion-content>
        }

      <!-- <ion-modal [isOpen]="isModalOpen">
        <ng-template>
          <ion-card class="results-card">
            <ion-card-header>
              <ion-card-title>{{bigliettoModificato.partenza}}    {{bigliettoModificato.destinazione}}</ion-card-title>
              <ion-card-subtitle>{{bigliettoModificato.aeroportoPartenza.idAeroporto}} {{bigliettoModificato.aeroportoPartenza.nome}} </ion-card-subtitle>
              <ion-card-subtitle>{{bigliettoModificato.aeroportoDestinazione.idAeroporto}} {{bigliettoModificato.aeroportoDestinazione.nome}} </ion-card-subtitle>
              <ion-card-subtitle>{{bigliettoModificato.dataPartenza.split(' ')[0]}}</ion-card-subtitle>
            </ion-card-header>
            <ion-card-content>
              <p>Orario di partenza: {{bigliettoModificato.dataPartenza.split(' ')[1]}}</p>
              <p>Orario di arrivo:{{bigliettoModificato.dataPartenza.split(' ')[2]}}</p>
              <p>Tariffa: {{bigliettoModificato.tariffa}}</p>
              <p>Posto: {{bigliettoModificato.posto}}</p>
              <p>Prezzo complessivo: {{bigliettoModificato.prezzoFinale}} €</p>
            </ion-card-content>
          </ion-card>
        </ng-template>
      </ion-modal> -->
      <ion-modal [isOpen]="isModalOpen">
        <ng-template>
          <div class="ticket-modified">
            <div class="ticket-title">
              <h1>{{bigliettoModificato.partenza}}</h1>
              <h1>{{bigliettoModificato.destinazione}}</h1>
            </div>
            <div class="ticket-subtitle">  
              <h3>{{bigliettoModificato.aeroportoPartenza.idAeroporto}} --> {{bigliettoModificato.aeroportoPartenza.nome}} </h3>
              <h3>{{bigliettoModificato.aeroportoDestinazione.idAeroporto}} --> {{bigliettoModificato.aeroportoDestinazione.nome}} </h3>
            </div>
            <div class="ticket-date">
              <!--La data viene mostrare non nella forma YYYY-MM-GG ma invertita, quindi nella forma GG-MM-YYYY-->
              <h4>{{bigliettoModificato.dataPartenza.split(' ')[0].split("-").reverse().join("-")}}    {{bigliettoModificato.dataPartenza.split(' ')[1]}}</h4>
              <h4>{{bigliettoModificato.dataPartenza.split(' ')[0].split("-").reverse().join("-")}}    {{bigliettoModificato.dataPartenza.split(' ')[2]}}</h4>
            </div> 
            <div class="ticket-info">
              <h6>Tariffa: {{bigliettoModificato.tariffa}}</h6>
              <h6>Posto: {{bigliettoModificato.posto}}</h6>
              <h6>Prezzo complessivo: {{bigliettoModificato.prezzoFinale}} €</h6>
            </div>  
          </div>
        </ng-template>
      </ion-modal>
        
    </ion-content> 
      